extends layout

block content
  .spacer
  .row
    .span8
      h3 Utenti
      
    .span4
      .spacer
      a.btn.pull-right.btn-primary(href='/users/form')
        i.icon-white.icon-plus
        |  Crea nuovo utente
  hr

  .row
    .span12
      if users.length > 0

        form.live-checkbox
          .pull-left
            p
              small.table-head#counter
                | Nessun utente selezionato
            select.input-large.selectpicker.show-menu-arrow(title='Scegli un corso...')
              for item in courses
                option(value=item.doc._id) #{item.doc.name}
            | &nbsp;
            button.btn.btn-success.btn-small(type='submit', name='enroll', value='Enroll')
              i.icon-white.icon-chevron-right 
              |  Iscrivi

          .pull-right
            p
              small.table-head &nbsp;
            div.input-append
              input.span3.search-query#user-search(type='search', placeholder='Filtra Nome o Società...', data-search-target='user-table')

          .clearfix

          hr
        
          table.table.table-striped#user-table
            thead
              tr
                th.text-center(style='width: 30px;')
                  input(type='checkbox')
                th.span3(style="width: auto;") Nome e cognome
                th.span2(style="width: auto;") Società
                th.text-center(style="width: 50px;") Stato
                th.span3(style="width: 180px;") Data creazione
                th.span3(style="width: 210px;") &nbsp;
            tbody
              each item in users
                tr
                  td.text-center.avoid-search
                    input(type='checkbox', name='user[#{item.doc._id}]', value='enroll')
                  td #{item.doc.name}
                  td #{item.doc.company}
                  td.text-center.avoid-search
                    if item.doc.enabled
                      img.image-icon(src='/img/icon-status-ok.png', title='Utente attivo')
                    else
                      img.image-icon(src='/img/icon-status-error.png', title='Utente disabilitato')
                  td.avoid-search #{moment(item.doc.created_on).format('LLL')}
                  td.actions.avoid-search
                    if item.doc.enabled
                      a.btn.btn-small.btn-danger(href='/users/disable/#{item.doc._id}')
                        i.icon-ban-circle.icon-white
                        |  Disabilita
                    else
                      a.btn.btn-small.btn-info(href='/users/disable/#{item.doc._id}')
                        i.icon-ok.icon-white
                        |  Abilita
                    | &nbsp;
                    a.btn.btn-small(href='/users/form/#{item.doc._id}')
                      i.icon-pencil.icon-white
                      |  Modifica
      
      
      else
        
        p.alert.alert-info Non è stato inserito ancora alcun utente.

